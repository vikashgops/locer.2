var dataVegetables = [
    {
        image: 'https://www.instacart.com/image-server/296x296/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_70c3c3cb-3268-405f-bb1e-750275d126f3.png',
        price: 3.49,
        priceTx: '',
        type: '',
        name: 'Melissa\'s Yellow Baby Dutch Potatoes Bag',
        qty: '24 oz bag'
    },
    {
        image: 'https://www.instacart.com/image-server/296x296/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_e2dd6bc6-09e0-4ac2-b298-ad6ac2e6d5d3.png',
        price: 0.99,
        priceTx: '',
        type:'Organic',
        name: 'Organic Cilantro',
        qty: '1 ct'
    },
    {
        image: 'https://www.instacart.com/image-server/394x394/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_492da442-8126-49f8-bb04-dfe8c6aca507.png',
        price: 0.99,
        priceTx: '',
        type:'Organic',
        name: 'Organic Green Onions',
        qty: '5.5 oz bunch'
    },
    {
        image: 'https://www.instacart.com/image-server/296x296/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_be2f00a6-7583-491e-9b40-a02a0df8fa58.png',
        price: 1.50,
        priceTx: '',
        type:'',
        name: 'Red Bell Pepper',
        qty: ''
    },
    {
        image: 'https://www.instacart.com/image-server/296x296/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_777b02dd-fc81-4e86-a34b-737518c9c395.png',
        price: 0.37,
        priceTx: 'each (est.)',
        type:'',
        name: 'Roma Tomato',
        qty: '$1.49 / lb'
    },
    {
        image: 'https://www.instacart.com/image-server/197x197/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_9d48596e-c096-4f42-a4b5-4cf89fefe15f.png',
        price: 0.58,
        priceTx: 'reg. $0.99',
        type:'',
        name: 'Cocumber',
        qty: ''
    },
    {
        image: 'https://www.instacart.com/image-server/197x197/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_83af50a3-68c1-4c24-94e9-1a2f8f1cab6d.png',
        price: 1.56,
        priceTx: 'each (est.)',
        type:'',
        name: 'Red Onion',
        qty: '$1.79 / lb'
    },
    {
        image: 'https://www.instacart.com/image-server/197x197/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_ab3bd925-d54c-4a4b-8c9f-939b1af0c0a6.png',
        price: 1.03,
        priceTx: 'each (est.)',
        type:'',
        name: 'Yellow Onion',
        qty: '$1.49 / lb'
    },
    {
        image: 'https://www.instacart.com/image-server/197x197/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_ebb63ac7-2c95-4e6f-9559-e1680127092f.png',
        price: 1.40,
        priceTx: 'each (est.)',
        type:'reg. $1.57',
        name: 'Broccoli Crown',
        qty: '$1.77 / lb'
    },
    {
        image: 'https://www.instacart.com/image-server/197x197/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_c423599f-11bf-4d84-a426-efa4776b2d60.png',
        price: 0.50,
        priceTx: '',
        type:'',
        name: 'Garlic',
        qty: ''
    },
    {
        image: 'https://www.instacart.com/image-server/197x197/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_754a9eb0-46bd-4ec6-9061-2e4c7ef383d5.png',
        price: 1.01,
        priceTx: 'each (est.)',
        type:'',
        name: 'Zucchini Squash',
        qty: '$1.99 / lb'
    },
    {
        image: 'https://www.instacart.com/image-server/197x197/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_7cb8a780-8964-4ca5-afe3-d53791e78aa9.png',
        price: 1.50,
        priceTx: '',
        type:'Organic',
        name: 'Organic Celery',
        qty: '1 ct'
    },
]

var dataFruit = [
    {
        image: 'https://www.instacart.com/image-server/197x197/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_bca88ebd-4e29-457a-875d-415c3d8cf3d5.png',
        price: 0.75,
        priceTx: '',
        type: '',
        name: 'Hass Avocado',
        qty: '1ct'
    },
    {
        image: 'https://www.instacart.com/image-server/197x197/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_839d7037-01ed-402b-b995-3ee037c94485.png',
        price: 0.36,
        priceTx: 'each(est.)',
        type: 'Organic',
        name: 'Organic Banana',
        qty: '$0.89/lb'
    },
    {
        image: 'https://www.instacart.com/image-server/197x197/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_5e84f80b-2c30-45b6-879f-e6e5741f6cf0.png',
        price: 2.00,
        priceTx: 'reg. $4.99',
        type: 'Organic',
        name: 'Organic Blueberries',
        qty: '6 oz Container'
    },
    {
        image: 'https://www.instacart.com/image-server/197x197/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_839d7037-01ed-402b-b995-3ee037c94485.png',
        price: 0.36,
        priceTx: 'each(est.)',
        type: '',
        name: 'Banana',
        qty: '$0.79/lb'
    },
    {
        image: 'https://www.instacart.com/image-server/197x197/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_29c3f797-a0cc-4241-a43b-141a1f0dcbf7.png',
        price: 3.50,
        priceTx: 'reg. $5.99',
        type: 'Organic',
        name: 'Organic Strawberries',
        qty: '1 pint container'
    },
    {
        image: 'https://www.instacart.com/image-server/197x197/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_29c3f797-a0cc-4241-a43b-141a1f0dcbf7.png',
        price: 2.98,
        priceTx: 'reg. $3.99',
        type: '',
        name: 'Strawberries',
        qty: '1 lb container'
    },
    {
        image: 'https://www.instacart.com/image-server/197x197/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_371621b0-9d1a-471c-b3cc-66f8293d80d7.png',
        price: 0.50,
        priceTx: '',
        type: '',
        name: 'Lemon',
        qty: ''
    },
    {
        image: 'https://www.instacart.com/image-server/197x197/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_7b163074-0594-4c39-8da8-f5df568a649a.png',
        price: 0.50,
        priceTx: '',
        type: '',
        name: 'Lime',
        qty: ''
    },
    {
        image: 'https://www.instacart.com/image-server/197x197/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_0781abc9-60f1-4073-afd5-720ee6504518.png',
        price: 3.50,
        priceTx: 'reg.$4.49',
        type: 'Organic',
        name: 'Organic Blackberries',
        qty: '6 oz container'
    },
    {
        image: 'https://www.instacart.com/image-server/197x197/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_0781abc9-60f1-4073-afd5-720ee6504518.png',
        price: 2.50,
        priceTx: 'reg.$3.49',
        type: '',
        name: 'Blackberries',
        qty: '5.6 oz container'
    },
    {
        image: 'https://www.instacart.com/image-server/197x197/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_66c22fdf-0e92-48de-b3d4-06c14455e630.png',
        price: 3.49,
        priceTx: '',
        type: '($0.11/oz)',
        name: 'Mandarins Bag',
        qty: '2 lb'
    },
    {
        image: 'https://www.instacart.com/image-server/197x197/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_954a15b8-0a19-4f8f-8bf3-1dd815bf25eb.png',
        price: 2.50,
        priceTx: 'reg.$3.49',
        type: '($0.42/oz)',
        name: 'Blueberries',
        qty: '6 oz'
    },
    {
        image: 'https://www.instacart.com/image-server/197x197/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_53d71af3-4702-4fa4-80e2-27676543643f.png',
        price: 5.99,
        priceTx: '',
        type: 'Organic',
        name: 'Organic Raspberries',
        qty: '6 oz container'
    },
    {
        image: 'https://www.instacart.com/image-server/197x197/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_be23e5f5-c95e-4fbc-8afc-23ab0cd8881a.png',
        price: 4.34,
        priceTx: 'reg.$6.55',
        type: '',
        name: 'Red Seedless Grapes',
        qty: '$1.98/ lb'
    },
    {
        image: 'https://www.instacart.com/image-server/197x197/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_66831aa1-1aba-4689-b1be-11c070e81f7b.png',
        price: 2.50,
        priceTx: 'reg.$3.50',
        type: '',
        name: 'Contaloupe',
        qty: '1 ct'
    },
    {
        image: 'https://www.instacart.com/image-server/197x197/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_ff38ed1c-e753-4aa3-b614-a4cddada2fec.png',
        price: 1.12,
        priceTx: 'each (est.)',
        type: '',
        name: 'Honeycrisp Apple',
        qty: '$2.79/lb'
    },
    {
        image: 'https://www.instacart.com/image-server/197x197/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_41d5b222-99de-4105-9a97-7a181dd1a824.png',
        price: 1.25,
        priceTx: 'reg.$1.50',
        type: '',
        name: 'Red Mango',
        qty: '1 ct'
    },
    {
        image: 'https://www.instacart.com/image-server/197x197/filters:fill(FFF,true):format(jpg)/d2lnr5mha7bycj.cloudfront.net/product-image/file/large_c67a59b5-7609-4c54-8411-0a8790174cac.png',
        price: 2.00,
        priceTx: 'reg.$2.99',
        type: 'Organic',
        name: 'Organic Large Hass',
        qty: '1 each'
    }
]

var cartData = JSON.parse(localStorage.getItem('cartItem')) || [];


var cardContainer = document.querySelector('.card-container');
var cardContainer1 = document.querySelector('.card-container1');
var cartItemCount = document.querySelector('#cart_item_count');
var loginBtn = document.querySelector('#loginBtn');
var cart = document.querySelector('.cart');
cart.addEventListener('click', goCart);
var total = cartData.reduce((total, elem) => {
    return total+elem.count;
},0)
console.log(cartData);
cartItemCount.innerText = total;
if(cartItemCount.innerText != '0'){
    cart.style.backgroundColor = 'rgb(10, 173, 10)';
    cart.style.color = 'white';
    loginBtn.style.backgroundColor = '#f6f7f8';
    loginBtn.style.color = '#343538';
}

document.querySelector('#btnLeft').addEventListener('click', funLeftBtn);
document.querySelector('#btnRight').addEventListener('click', funRightBtn);
document.querySelector('#btnLeft1').addEventListener('click', funLeftBtn1);
document.querySelector('#btnRight1').addEventListener('click', funRightBtn1);
var node = 0;
var k=6;


function funRightBtn(){
    
    var card = document.querySelectorAll('.card');
    if(node < card.length){
        for(var i=0; i<dataVegetables.length; i++){
            card[i].classList.add('hidden');
            card[i].classList.remove('visible')
        }
        for(var i=node; i<dataVegetables.length; i++){
            card[i].classList.remove('hidden');
            card[i].classList.add('visible')
            if(i == node+k-1 || i==dataVegetables.length-1){
                node=node+k;
                break;
            }
        }
    }
}
function funLeftBtn(){
    var card = document.querySelectorAll('.card');
    if(node > k ){
        for(var i=0; i<dataVegetables.length; i++){
            card[i].classList.add('hidden');
        }
        node = node-(k*2)
        for(var i=node; i<dataVegetables.length; i++){
            card[i].classList.remove('hidden');
            card[i].classList.add('visible')
            if(i == node+k-1){
                node=node+k;
                break;
            }
        }
    }
}

var node1 = 0;
var k1=6;

function funRightBtn1(){
    var card = document.querySelectorAll('.card1');
    if(node1 < card.length){
        for(var i=0; i<dataFruit.length; i++){
            card[i].classList.add('hidden');
            card[i].classList.remove('visible')
        }
        for(var i=node1; i<dataFruit.length; i++){
            card[i].classList.remove('hidden');
            card[i].classList.add('visible')
            if(i == node1+k1-1 || i==dataFruit.length-1){
                node1=node1+k1;
                break;
            }
        }
    }
    
}
function funLeftBtn1(){
    var card = document.querySelectorAll('.card1');
    if(node1 > k1 ){
        for(var i=0; i<dataFruit.length; i++){
            card[i].classList.add('hidden');
        }
        node1 = node1-(k1*2)
        for(var i=node1; i<dataFruit.length; i++){
            card[i].classList.remove('hidden');
            card[i].classList.add('visible')
            if(i == node1+k1-1 ){
                node1=node1+k1;
                break;
            }
        }
    }
}
dataVegetables.map((element, index) => {
    
    var card = document.createElement('div');
    card.className = 'card hidden';
    var imgDiv = document.createElement('div');
    var img = document.createElement('img');
    img.src = element.image;
    imgDiv.append(img);
    var textDiv = document.createElement('div');
    textDiv.className = 'text-content';
    var priceDiv = document.createElement('div');
    var price = document.createElement('span');
    price.textContent = `$ ${element.price}`
    price.className = 'price';
    priceDiv.append(price);
    var spn = document.createElement('span');
    spn.innerText = element.priceTx;
    spn.style.fontSize = '13px';
    spn.style.marginLeft = '5px'
    priceDiv.append(spn);
    var nameDiv = document.createElement('div');
    nameDiv.innerText = element.name;
    nameDiv.className = 'product-name';
    var type = document.createElement('div');
    type.innerText = element.type;
    if(element.type == 'Organic'){
        type.style.color = 'blue';
        type.style.fontSize = '13px';
    }
    var qtyDiv = document.createElement('div');
    qtyDiv.innerText = element.qty;
    qtyDiv.className = 'qty';
    textDiv.append(priceDiv,type,nameDiv, qtyDiv);
    


    var addCart = document.createElement('div');
    addCart.className = 'addGroup';
    var btn = document.createElement('button');
    btn.innerHTML = `<span>+</span> Add`;
    btn.addEventListener('mouseenter', ()=>{
        btn.innerHTML = `<span>+</span> Add to cart`;
    })
    btn.addEventListener('mouseout', ()=>{
        btn.innerHTML = `<span>+</span> Add`;
    })
    btn.addEventListener('click', ()=>{
        hvr(element, index);
    })
    addCart.appendChild(btn);
    card.append(addCart,imgDiv,textDiv);
    cardContainer.append(card);
})

dataFruit.map((element, index) => {
    
    
    var card = document.createElement('div');
    card.className = 'card1 hidden';
    var imgDiv = document.createElement('div');
    var img = document.createElement('img');
    img.src = element.image;
    imgDiv.append(img);
    var textDiv = document.createElement('div');
    textDiv.className = 'text-content';
    var priceDiv = document.createElement('div');
    var price = document.createElement('span');
    price.textContent = `$ ${element.price}`
    price.className = 'price';
    priceDiv.append(price);
    var spn = document.createElement('span');
    spn.innerText = element.priceTx;
    spn.style.fontSize = '13px';
    spn.style.marginLeft = '5px'
    priceDiv.append(spn);
    
    var nameDiv = document.createElement('div');
    nameDiv.innerText = element.name;
    nameDiv.className = 'product-name';
    var type = document.createElement('div');
    type.innerText = element.type;
    if(element.type == 'Organic'){
        type.style.color = 'blue';
        type.style.fontSize = '13px';
    }
    var qtyDiv = document.createElement('div');
    qtyDiv.innerText = element.qty;
    qtyDiv.className = 'qty';
    textDiv.append(priceDiv,type,nameDiv, qtyDiv);


    var addCart = document.createElement('div');
    addCart.className = 'addGroup';
    var btn = document.createElement('button');
    btn.innerHTML = `<span>+</span> Add`;
    btn.addEventListener('mouseenter', ()=>{
        btn.innerHTML = `<span>+</span> Add to cart`;
    })
    btn.addEventListener('mouseout', ()=>{
        btn.innerHTML = `<span>+</span> Add`;
    })
    btn.addEventListener('click', ()=>{
        hvr(element, index);
    })
    addCart.appendChild(btn);
    card.append(addCart,imgDiv,textDiv);
    cardContainer1.append(card);
})

funRightBtn();
funRightBtn1();

function hvr(element, idx){
    if(cartData.length > 0){
        var flag = false;
        for(var i=0; i<cartData.length; i++){
            if(cartData[i].index == idx){
                cartData[i].count = cartData[i].count+1;
                flag =false;
                break;
            }
            else{
                flag = true;
            }
        }
        if(flag){
            cartData.push({index:idx, elem:element, count:1});
        }
    }
    else{
        cartData.push({index:idx, elem:element, count:1});
    }

    // cartData.push(element);
    var total = cartData.reduce((total, elem) => {
        return total+elem.count;
    },0)
    cartItemCount.innerText = total;
    if(cartItemCount.innerText != '0'){
        cart.style.backgroundColor = 'rgb(10, 173, 10)';
        cart.style.color = 'white';
        loginBtn.style.backgroundColor = '#f6f7f8';
        loginBtn.style.color = '#343538';
    }
    localStorage.setItem('cartItem', JSON.stringify(cartData));
    console.log(cartData);
}

function goCart(){
    window.location.href= 'cart.html';
}